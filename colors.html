<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paint Color Palettes</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); color: #fff; min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 15px; }
        .header h1 { font-size: 32px; display: flex; align-items: center; gap: 10px; }
        .back-btn { background: #0080ff; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; text-decoration: none; display: inline-block; transition: background 0.3s; }
        .back-btn:hover { background: #0066cc; }
        .subtitle { color: #aaa; margin-bottom: 20px; text-align: center; }
        .palette-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; }
        .palette-card { background: #2a2a3e; border-radius: 12px; overflow: hidden; box-shadow: 0 8px 20px rgba(0,0,0,0.3); transition: transform 0.3s, box-shadow 0.3s; }
        .palette-card:hover { transform: translateY(-5px); box-shadow: 0 12px 30px rgba(0,0,0,0.5); }
        .palette-image { width: 100%; height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; font-size: 14px; color: rgba(255,255,255,0.7); cursor: pointer; position: relative; }
        .palette-image img { width: 100%; height: 100%; object-fit: cover; }
        .palette-title { padding: 15px; background: #222; font-size: 16px; font-weight: 600; }
        .palette-colors { padding: 15px; display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 10px; }
        .color-item { text-align: center; cursor: pointer; }
        .color-swatch { width: 100%; height: 60px; border-radius: 6px; margin-bottom: 5px; border: 2px solid #444; transition: border-color 0.2s; }
        .color-item:hover .color-swatch { border-color: #0080ff; }
        .color-label { font-size: 11px; color: #aaa; font-weight: 500; }
        .color-code { font-size: 10px; color: #777; font-family: monospace; }
        .empty-msg { text-align: center; padding: 40px; color: #888; }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center; }
        .modal-overlay.active { display: flex; }
        .modal { background: #2a2a3e; border-radius: 12px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid #444; background: #1a1a2e; }
        .modal-title { font-size: 18px; font-weight: 600; }
        .modal-close { background: none; border: none; color: #888; font-size: 24px; cursor: pointer; }
        .modal-close:hover { color: #fff; }
        .modal-body { padding: 20px; }
        .color-item-detail { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 12px; background: #1a1a2e; border-radius: 6px; }
        .color-info { display: flex; align-items: center; gap: 10px; flex: 1; }
        .color-detail-swatch { width: 40px; height: 40px; border-radius: 4px; border: 1px solid #444; }
        .color-detail-text { flex: 1; }
        .color-detail-name { font-size: 13px; color: #aaa; }
        .color-detail-code { font-size: 12px; color: #0080ff; font-family: monospace; font-weight: 600; }
        .copy-btn { background: #0080ff; border: none; color: white; padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; transition: background 0.2s; }
        .copy-btn:hover { background: #0066cc; }
        .toast { position: fixed; bottom: 20px; right: 20px; background: #28a745; color: white; padding: 12px 20px; border-radius: 6px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 2000; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Paint Color Palettes</h1>
            <a href="index.html" class="back-btn">‚Üê Back to Home</a>
        </div>
        <div class="subtitle">Click on any card to view detailed colors and copy color codes</div>
        <div id="paletteGrid" class="palette-grid"></div>
        <div id="emptyMsg" class="empty-msg" style="display:none;">No palettes added yet. Go to Home and add colors to see them here!</div>
    </div>

    <div id="modalOverlay" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" id="modalPaletteTitle">Palette</div>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script>
        const COLORS_KEY = "sahu_paints_colors_v1";
        let allColors = [];

        function loadColors() {
            try {
                allColors = JSON.parse(localStorage.getItem(COLORS_KEY) || "[]");
            } catch (e) {
                allColors = [];
            }
        }

        function groupColorsBySegment() {
            const groups = {};
            allColors.forEach(color => {
                const segment = color.segment || 'other';
                if (!groups[segment]) groups[segment] = [];
                groups[segment].push(color);
            });
            return groups;
        }

        function renderPalettes() {
            const grid = document.getElementById('paletteGrid');
            const emptyMsg = document.getElementById('emptyMsg');
            
            grid.innerHTML = '';
            
            if (allColors.length === 0) {
                emptyMsg.style.display = 'block';
                return;
            }
            emptyMsg.style.display = 'none';
            
            const segments = groupColorsBySegment();
            const segmentNames = {
                'interior': 'üè† Interior',
                'exterior': 'üå≥ Exterior',
                'ceiling': '‚ú® Ceiling',
                'kids': 'üé® Kids Room',
                'other': 'üìå Other'
            };
            
            Object.keys(segments).forEach(segment => {
                const colors = segments[segment];
                const card = document.createElement('div');
                card.className = 'palette-card';
                
                const image = document.createElement('div');
                image.className = 'palette-image';
                image.textContent = segmentNames[segment];
                
                const title = document.createElement('div');
                title.className = 'palette-title';
                title.textContent = segmentNames[segment];
                
                const colorsDiv = document.createElement('div');
                colorsDiv.className = 'palette-colors';
                
                colors.forEach(color => {
                    const item = document.createElement('div');
                    item.className = 'color-item';
                    item.onclick = () => openModal(segment);
                    
                    const swatch = document.createElement('div');
                    swatch.className = 'color-swatch';
                    swatch.style.background = color.hex || '#ccc';
                    
                    const label = document.createElement('div');
                    label.className = 'color-label';
                    label.textContent = color.name || 'Unnamed';
                    
                    const code = document.createElement('div');
                    code.className = 'color-code';
                    code.textContent = color.code || color.hex;
                    
                    item.appendChild(swatch);
                    item.appendChild(label);
                    item.appendChild(code);
                    colorsDiv.appendChild(item);
                });
                
                card.appendChild(image);
                card.appendChild(title);
                card.appendChild(colorsDiv);
                grid.appendChild(card);
            });
        }

        function openModal(segment) {
            const colors = allColors.filter(c => (c.segment || 'other') === segment);
            const segmentNames = {
                'interior': 'üè† Interior Colors',
                'exterior': 'üå≥ Exterior Colors',
                'ceiling': '‚ú® Ceiling Colors',
                'kids': 'üé® Kids Room Colors',
                'other': 'üìå Other Colors'
            };
            
            document.getElementById('modalPaletteTitle').textContent = segmentNames[segment];
            
            let body = '';
            colors.forEach(color => {
                body += `
                    <div class="color-item-detail">
                        <div class="color-info">
                            <div class="color-detail-swatch" style="background: ${color.hex || '#ccc'};"></div>
                            <div class="color-detail-text">
                                <div class="color-detail-name">${color.name || 'Unnamed'}</div>
                                <div class="color-detail-code">${color.code || color.hex}</div>
                            </div>
                        </div>
                        <button class="copy-btn" onclick="copyToClipboard('${(color.code || color.hex).replace(/'/g, "\\'")}', this)">Copy</button>
                    </div>
                `;
            });
            
            document.getElementById('modalBody').innerHTML = body;
            document.getElementById('modalOverlay').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('active');
        }

        function copyToClipboard(text, btn) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = btn.textContent;
                btn.textContent = '‚úì Copied';
                btn.style.background = '#28a745';
                
                showToast(`Copied: ${text}`);
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 2000);
            }).catch(err => {
                alert('Failed to copy');
            });
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        document.getElementById('modalOverlay').addEventListener('click', (e) => {
            if (e.target.id === 'modalOverlay') closeModal();
        });

        // Initialize
        loadColors();
        renderPalettes();

        // Listen for storage changes (when user adds colors in another tab)
        window.addEventListener('storage', (e) => {
            if (e.key === COLORS_KEY) {
                loadColors();
                renderPalettes();
            }
        });
    </script>
</body>
</html>
